# –ü—Ä–æ–µ–∫—Ç —Å Yarn Workspace –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Yarn Workspace –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ –∏ –≤–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ –±–∞–∑–µ Zabbix –∏ Grafana, –∞ —Ç–∞–∫–∂–µ MongoDB —Ä–µ–ø–ª–∏–∫—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å MongoDB —Ä–µ–ø–ª–∏–∫–æ–π:

```cmd
start-with-mongodb.cmd
```

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É –∑–∞–ø—É—Å–∫—É](docs/QUICK_START_MONGODB.md).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ shared/          # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ app/            # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ package.json        # –ö–æ—Ä–Ω–µ–≤–æ–π package.json —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ workspace
‚îî‚îÄ‚îÄ tsconfig.json       # –û–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
yarn install
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
yarn build
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤–æ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–∞—Ö
```bash
yarn test
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
yarn dev
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç:
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Zabbix, Grafana, PostgreSQL, nginx)
- –í—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ dev —Å–µ—Ä–≤–µ—Ä—ã:
  - app-web –Ω–∞ –ø–æ—Ä—Ç—É 3003 (–≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
  - app-server –Ω–∞ –ø–æ—Ä—Ç—É 3001 (API —Å–µ—Ä–≤–µ—Ä)
  - app-web-billing –Ω–∞ –ø–æ—Ä—Ç—É 3002 (–±–∏–ª–ª–∏–Ω–≥)

### –û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```bash
yarn clean
```

## –†–∞–±–æ—Ç–∞ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏

### –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–∞–∫–µ—Ç–µ
```bash
yarn workspace @workspace/app dev
yarn workspace @workspace/shared build
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–∞–∫–µ—Ç
```bash
yarn workspace @workspace/app add lodash
yarn workspace @workspace/shared add -D jest
```

## –ü–∞–∫–µ—Ç—ã

### @workspace/shared
–°–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ –≤ workspace.

### @workspace/app
–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–∫–µ—Ç @workspace/shared.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `yarn install`
2. –°–æ–±–µ—Ä–∏—Ç–µ shared –ø–∞–∫–µ—Ç: `yarn workspace @workspace/shared build`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `yarn workspace @workspace/app dev`

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –≤ workspace:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –≤ `packages/`
2. –î–æ–±–∞–≤—å—Ç–µ `package.json` —Å –∏–º–µ–Ω–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `@workspace/package-name`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º—è –ø–∞–∫–µ—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö workspace
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `yarn install` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

### Zabbix
- –°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –î–æ—Å—Ç—É–ø: http://localhost/zabbix/
- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [ZABBIX_README.md](ZABBIX_README.md)

### Grafana
- –°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Zabbix
- –î–æ—Å—Ç—É–ø: http://localhost:3000 –∏–ª–∏ http://localhost/grafana/
- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [GRAFANA_README.md](GRAFANA_README.md)

### –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
docker-compose -f docker-compose.dev.yml --env-file .env.development up -d
```

#### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
```bash
docker-compose -f docker-compose.production.yml --env-file .env.production up -d
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- **App Web (–≥–ª–∞–≤–Ω–∞—è)**: http://localhost/
- **App Server API**: http://localhost/api/ (–Ω–∞–ø—Ä–∏–º–µ—Ä: http://localhost/api/health)
- **App Web Billing**: http://localhost/billing
- **Zabbix**: http://localhost/zabbix/ (Admin/zabbix)
- **Grafana**: http://localhost/grafana/ (admin/admin –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- PostgreSQL: localhost:5432
- **MongoDB –†–µ–ø–ª–∏–∫–∞**:
  - Primary: localhost:27017
  - Secondary: localhost:27018
  - Arbiter: localhost:27019

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å MongoDB](docs/QUICK_START_MONGODB.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ](docs/DEVELOPMENT_GUIDE.md)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ App Web Billing](docs/APP_WEB_BILLING_DEV_SETUP.md)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB —Ä–µ–ø–ª–∏–∫–∏](docs/MONGODB_SETUP.md)